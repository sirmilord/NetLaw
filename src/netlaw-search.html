<link rel="import" href="../bower_components/polymer/polymer-element.html">
<!--<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">-->
<!--<link rel="import" href="../bower_components/paper-item/paper-item.html">-->
<!--<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html">-->
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-dropdown/iron-dropdown.html">
<!--<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">-->
<!--<link rel="import" href="../bower_components/paper-input/paper-input.html">-->
<!--<link rel="import" href="../bower_components/iron-form/iron-form.html">-->

<!-- Ensure Web Animations polyfill is loaded since neon-animation 2.0 doesn't import it -->
<!--<link rel="import" href="../bower_components/neon-animation/web-animations.html">-->

<dom-module id="netlaw-search">

  <template>

    <style>
      /* shadow DOM styles go here */
      :host {
        --iron-icon-width: 28px;
        --iron-icon-height: 28px;
        position: relative;
        margin-left: auto;
        margin-right: auto;
      }

      input[type=search] {
        border: 0;
        padding-left: 15px;
        top: 7px ;
        position: absolute;
        left: 23px;
        width: 270px;
        height: 24px;
      }

      input[type=search]::placeholder {
        font-size: 14px;
      }

      input[type=search]:focus {
        outline: 0;
      }

      #dropdown {
        width: 300px;
        background-color: var(--app-header-bg);
      }

      a.netlaw-search {
        cursor: pointer;
      }

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      li {
        font-size: 16px;
        padding: 10px;
        color: #333;
      }

      :host([pressed]) iron-icon {
        border-bottom: 1px solid var(--app-header-color);
      }

      :host([pressed]) input {
        border-bottom: 1px solid var(--app-header-color);
      }

    </style>

    <!--todo: refactor search icons and input -->
    <a on-click="toggle">
      <iron-icon icon="[[toggleIcon]]" src="./images/icons/search_icon.svg"></iron-icon>
    </a>
    <input id="search" type="search" name="search" placeholder="Search Documents and Contacts..." autocomplete="off"
           hidden$="[[!visible]]" on-mouseover="openChoices">

    <iron-dropdown id="dropdown" vertical-offset="47" no-auto-focus no-cancel-on-outside-click>
      <ul slot="dropdown-content">
        <li>Listed result contact item 1 ...</li>
        <li>Listed result contact item 2 ...</li>
        <li>Listed result contact item 3 ...</li>
        <br/>
        <li>Listed result contact item 4 ...</li>
        <li>Listed result contact item 5 ...</li>
      </ul>
    </iron-dropdown>

  </template>

  <script>

      class NetlawSearch extends Polymer.Element {
          static get is() {
              return 'netlaw-search';
          }

          static get properties() {
              return {
                  pressed: {
                      type: Boolean,
                      notify: true,
                      reflectToAttribute: true,
                      value: false
                  },
                  toggleIcon: {
                      type: String
                  },
                  visible: {type: Boolean, value: false,},
              };
          }

          constructor() {
              super();
              this.addEventListener('blur', e => this.close());
              this.toggleIcon = 'search';
              // this.target = this.$.search;
          }

          open() {
              this.visible = true;
              this.pressed = true;
              this.toggleIcon = 'close';
              this.$.search.focus();

          }

          close() {
              this.visible = false;
              this.pressed = false;
              this.$.dropdown.close();
              this.toggleIcon = 'search';
          }

          toggle() {
              this.visible ? this.close() : this.open();
          }

          openChoices() {
              this.$.dropdown.open();
          }
          // ready(){
          //     super.ready();
          //     console.log(this.$.dropdown.querySelector('ul'));
          //     console.log(this.shadowRoot.querySelector('ul'));
          // }

      }

      customElements.define(NetlawSearch.is, NetlawSearch);
  </script>

</dom-module>

